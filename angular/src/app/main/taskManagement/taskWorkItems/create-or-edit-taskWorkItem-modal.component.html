<div bsModal #createOrEditModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="createOrEditModal" aria-hidden="true" [config]="{ backdrop: 'static' }">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form *ngIf="active" #taskWorkItemForm="ngForm" novalidate (ngSubmit)="save()" autocomplete="off">
                <div class="modal-header">
                    <h4 class="modal-title">
                        <span *ngIf="taskWorkItem.id">{{ l('EditTaskWorkItem') }}</span>
                        <span *ngIf="!taskWorkItem.id">{{ l('CreateNewTaskWorkItem') }}</span>
                    </h4>

                    <button type="button" class="btn-close" (click)="close()" aria-label="Close"
                        [disabled]="saving"></button>
                </div>
                <div class="modal-body">
                    <div class="my-3" *ngIf="!taskEventId">
                        <label class="form-label" for="TaskEventName">{{ l('TaskEvent') }}</label>
                        <div class="input-group">
                            <input class="form-control" id="TaskEventName" name="taskEventName"
                                [(ngModel)]="taskEventName" type="text" disabled />
                            <button class="btn btn-primary blue" (click)="openSelectTaskEventModal()" type="button">
                                <i class="fa fa-search"></i>
                                {{ l('Pick') }}
                            </button>
                            <button class="btn btn-danger btn-icon" type="button" (click)="setTaskEventIdNull()">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <input *ngIf="!taskEventId" class="form-control" name="taskWorkItem.taskEventId"
                        [(ngModel)]="taskWorkItem.taskEventId" type="text" required hidden />

                    <div class="my-3" *ngIf="!isBulkItem">
                        <label class="form-label" for="EmployeeName">{{ l('Employee') }}</label>
                        <div class="input-group">
                            <input class="form-control" id="EmployeeName" name="employeeName" [(ngModel)]="employeeName"
                                type="text" disabled />
                            <button class="btn btn-primary blue" (click)="openSelectEmployeeModal()" type="button">
                                <i class="fa fa-search"></i>
                                {{ l('Pick') }}
                            </button>
                            <button class="btn btn-danger btn-icon" type="button" (click)="setEmployeeIdNull()">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <input class="form-control" name="taskWorkItem.employeeId" [(ngModel)]="taskWorkItem.employeeId"
                        type="text" hidden />

                    <div class="my-3">
                        <label class="form-label" for="TaskWorkItem_Name">Work Item Title</label>
                        <!-- <input
                            type="text"
                            #TaskWorkItem_Name="ngModel"
                            id="TaskWorkItem_Name"
                            class="form-control"
                            [(ngModel)]="taskWorkItem.name"
                            name="Name"
                            minlength="1"
                            maxlength="1024"
                            required (input)="onInput($event)"
                        /> -->
                        <textarea type="text" #TaskWorkItem_Name="ngModel" id="TaskWorkItem_Name" class="form-control"
                            [(ngModel)]="taskWorkItem.name" name="Name" required cols="30" rows="10"></textarea>
                        <validation-messages [formCtrl]="TaskWorkItem_Name"></validation-messages>
                    </div>
                    <div class="my-3" *ngIf="!isBulkItem">
                        <label class="form-label" for="TaskWorkItem_Name">Description</label>

                        <!-- <textarea type="text" #TaskWorkItem_Name="ngModel" id="TaskWorkItem_Name" class="form-control" 
                        [(ngModel)]="taskWorkItem.description" name="Name" required cols="30" rows="10"></textarea> -->
                        <p-editor id="description" name="description" [(ngModel)]="taskWorkItem.description"
                            ngDefaultControl [style]="{ height: '300px' }" placeholder=""></p-editor>
                        <!-- <validation-messages [formCtrl]="TaskWorkItem_Name"></validation-messages> -->
                    </div>
                    <div class="my-5" *ngIf="!isBulkItem">
                        <label class="form-check form-check-custom form-check-solid">
                            <input id="TaskEvent_hasDependency" #TaskEvent_hasDependency="ngModel" name="hasDependency"
                                [(ngModel)]="taskWorkItem.hasDependency" type="checkbox" class="form-check-input" />
                            <span class="form-check-label">
                                {{ l('Has Dependency?') }}
                            </span>
                        </label>
                        <!-- <validation-messages [formCtrl]="TaskEvent_hasDependency"></validation-messages> -->
                    </div>

                    <div class="my-5" *ngIf="taskWorkItem?.hasDependency && !isBulkItem" >
                        <div class="my-3 p_filter">
                            <!-- <label class="form-label" for="TaskEventName">{{ l('Task Event') }}</label> (onChange)="onCountryChange($event)" -->
                            <label class="form-label" for="CountryName">{{ l('Select Work Item') }}</label>
                            
                            <!-- <p-dropdown [options]="workItems" [(ngModel)]="workItems.id" optionLabel="workItems.name"></p-dropdown> -->
                             <p-dropdown [options]="workItems"  [virtualScroll]="true"
                                placeholder="Select" [itemSize]="30" name="name" optionLabel="workItems.taskWorkItem.name"
                                optionId="workItems.taskWorkItem.id" [(ngModel)]="taskWorkItem.id"
                                [style]="{ width: '100%' }" ></p-dropdown> 
                            <!-- <div class="input-group">

                            <input class="form-control" id="TaskEventName" name="taskEventName"
                                    [(ngModel)]="taskEventName" type="text" disabled />
                                <button class="btn btn-primary blue" (click)="openSelectTaskEventModal()" type="button">
                                    <i class="fa fa-search"></i>
                                    {{ l('Pick') }}
                                </button>
                                <button class="btn btn-danger btn-icon" type="button" (click)="setTaskEventIdNull()">
                                    <i class="fa fa-times"></i>
                                </button> -->
                        </div>
                    </div>


                    <div class="row" *ngIf="!isBulkItem">
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_EstimatedHours">{{ l('EstimatedHours')
                                    }}</label>
                                <input type="text" #TaskWorkItem_EstimatedHours="ngModel"
                                    id="TaskWorkItem_EstimatedHours" class="form-control"
                                    [(ngModel)]="taskWorkItem.estimatedHours" name="EstimatedHours" minlength="1"
                                    maxlength="50" />
                                <validation-messages [formCtrl]="TaskWorkItem_EstimatedHours"></validation-messages>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_ActualHours">{{ l('ActualHours') }}</label>
                                <input type="text" #TaskWorkItem_ActualHours="ngModel" id="TaskWorkItem_ActualHours"
                                    class="form-control" [(ngModel)]="taskWorkItem.actualHours" name="ActualHours"
                                    minlength="1" maxlength="50" />
                                <validation-messages [formCtrl]="TaskWorkItem_ActualHours"></validation-messages>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_StartDate">{{ l('StartDate') }}</label>
                                <input class="form-control m-input" #TaskWorkItem_StartDate type="datetime" bsDatepicker
                                    datePickerLuxonModifier [(date)]="taskWorkItem.startDate"
                                    id="TaskWorkItem_StartDate" name="TaskWorkItem_StartDate" />
                                <validation-messages [formCtrl]="TaskWorkItem_StartDate"></validation-messages>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_EndDate">{{ l('EndDate') }}</label>
                                <!-- <input
                                    class="form-control m-input"
                                    #TaskWorkItem_EndDate
                                    type="datetime"
                                    bsDatepicker
                                    datePickerLuxonModifier
                                    [(date)]="taskWorkItem.endDate"
                                    id="TaskWorkItem_EndDate"
                                    name="TaskWorkItem_EndDate"
                                /> -->
                                <input class="form-control m-input" #TaskWorkItem_EndDate type="datetime" bsDatepicker
                                    datePickerLuxonModifier [(date)]="taskWorkItem.endDate" id="TaskWorkItem_EndDate"
                                    name="TaskWorkItem_EndDate" />

                                <validation-messages [formCtrl]="TaskWorkItem_EndDate"></validation-messages>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_StartTime">{{ l('StartTime') }}</label>
                                <!-- <input
                                    type="text"
                                    #TaskWorkItem_StartTime="ngModel"
                                    id="TaskWorkItem_StartTime"
                                    class="form-control"
                                    [(ngModel)]="taskWorkItem.startTime"
                                    name="StartTime"
                                    minlength="1"
                                    maxlength="50"
                                />
                                <validation-messages [formCtrl]="TaskWorkItem_StartTime"></validation-messages> -->
                                <input class="form-control" [(ngModel)]="taskWorkItem.startTime" name="StartTime"
                                    [ngxTimepicker]="startTime" aria-label="12hr format" type="text" readonly>
                                <ngx-material-timepicker #startTime (timeSet)="startTimeValue($event)">
                                </ngx-material-timepicker>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-6">
                            <div class="my-3">
                                <label class="form-label" for="TaskWorkItem_EndTime">{{ l('EndTime') }}</label>
                                <!-- <input
                                    type="text"
                                    #TaskWorkItem_EndTime="ngModel"
                                    id="TaskWorkItem_EndTime"
                                    class="form-control"
                                    [(ngModel)]="taskWorkItem.endTime"
                                    name="EndTime"
                                    minlength="1"
                                    maxlength="50"
                                /> -->
                                <input class="form-control" [(ngModel)]="taskWorkItem.endTime" name="EndTime"
                                    [ngxTimepicker]="endTime" aria-label="12hr format" type="text" readonly>
                                <ngx-material-timepicker #endTime (timeSet)="endTimeValue($event)">
                                </ngx-material-timepicker>
                                <!-- <validation-messages [formCtrl]="TaskWorkItem_EndTime"></validation-messages> -->
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="my-5">
                                <label class="form-label" for="taskWorkItem_billingAmount">{{ l('Billing Amount')
                                    }}</label>
                                <input type="text" #taskWorkItem_billingAmount="ngModel" id="taskWorkItem_billingAmount"
                                    class="form-control" type="number" [(ngModel)]="taskWorkItem.billingAmount"
                                    name="billingAmount" minlength="0" />
                                <validation-messages [formCtrl]="taskWorkItem_billingAmount"></validation-messages>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="my-5">
                                <label class="form-label" for="taskWorkItem_costAmount">{{ l('Cost Amount') }}</label>
                                <input type="text" #taskWorkItem_costAmount="ngModel" id="taskWorkItem_costAmount"
                                    class="form-control" type="number" [(ngModel)]="taskWorkItem.costAmount"
                                    name="costAmount" minlength="0" />
                                <validation-messages [formCtrl]="taskWorkItem_costAmount"></validation-messages>
                            </div>
                        </div>


                        <div class="col-md-6">
                            <!-- <div class="d-flex align-items-center flex-column mt-5">
                                <div class="d-flex justify-content-between w-100 mt-auto mb-2">
                                    <span class="fw-semibold fs-6 text-gray-400">
                                        Compleation Percentage</span>
                                    <span class="fw-bold fs-6">{{taskWorkItem.completionPercentage}}%</span>

                                </div>
                                <div class="h-5px mx-3 w-100 bg-light mb-3">
                               
                                    <p-slider [(ngModel)]="taskWorkItem.completionPercentage"></p-slider>
                                </div>
                            </div> -->
                            <div class=" mt-5">
                                <label class="form-label" for="TaskWorkItem_CompletionPercentage">
                                    {{ l('CompletionPercentage') }}
                                </label>
                                <input type="text" pInputText [(ngModel)]="taskWorkItem.completionPercentage" name="completionPercentage" class="w-full form-control"/>
                                <p-slider [(ngModel)]="taskWorkItem.completionPercentage" name="completionPercentageSlider" class="w-full"></p-slider>
                            </div>
                        </div>
                        <!-- <div class="my-5" *ngIf="!isBulkItem">
                                <label class="form-label" for="TaskWorkItem_CompletionPercentage">
                                    {{ l('CompletionPercentage') }}
                                </label>
                                <input
                                    type="number"
                                    #TaskWorkItem_CompletionPercentage="ngModel"
                                    id="TaskWorkItem_CompletionPercentage"
                                    class="form-control"
                                    [(ngModel)]="taskWorkItem.completionPercentage"
                                    name="CompletionPercentage"
                                />
                                 <validation-messages [formCtrl]="TaskWorkItem_CompletionPercentage"></validation-messages> 
                            </div> -->
                    <!-- </div> -->
                    <div class="col-md-6">
                        <div class="my-5" *ngIf="!isBulkItem">
                            <label class="form-label" for="TaskWorkItem_sequenceNumber">
                                {{ l('SequenceNumber') }}
                            </label>
                            <input type="number" #TaskWorkItem_sequenceNumber="ngModel" id="TaskWorkItem_sequenceNumber"
                                class="form-control" [(ngModel)]="taskWorkItem.sequenceNumber" name="sequenceNumber" />
                            <!-- <validation-messages [formCtrl]="TaskWorkItem_CompletionPercentage"></validation-messages> -->
                        </div>
                    </div>
                    <div class="my-5 select_button_custom" *ngIf="!isBulkItem">
                        <label class="form-label" for="TaskWorkItem_OpenOrClosed">{{ l('OpenOrClosed') }}</label>
                        <p-selectButton [options]="OpenOrClosedOptions" name="OpenOrClosedOptions"
                            id="TaskWorkItem_OpenOrClosed" [(ngModel)]="taskWorkItem.openOrClosed" optionLabel="label"
                            optionValue="value"></p-selectButton>
                    </div>
                </div>










                <!-- <br />
                    <label class="form-check form-check-custom form-check-solid">
                        <input
                            id="TaskWorkItem_OpenOrClosed"
                            #TaskWorkItem_OpenOrClosed="ngModel"
                            name="OpenOrClosed"
                            [(ngModel)]="taskWorkItem.openOrClosed"
                            type="checkbox"
                            class="form-check-input"
                        />
                        <span class="form-check-label">
                            {{ l('OpenOrClosed') }}
                        </span>
                    </label>
                    <validation-messages [formCtrl]="TaskWorkItem_OpenOrClosed"></validation-messages> -->


        </div>
        <div class="modal-footer">
            <button [disabled]="saving" type="button" class="btn btn-default" (click)="close()">
                {{ l('Cancel') }}
            </button>
            <button type="submit" class="btn btn-primary blue" [disabled]="!taskWorkItemForm.form.valid"
                [buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')">
                <i class="fa fa-save"></i>
                <span>{{ l('Save') }}</span>
            </button>
        </div>
        </form>
    </div>
</div>
<taskWorkItemTaskEventLookupTableModal #taskWorkItemTaskEventLookupTableModal (modalSave)="getNewTaskEventId()">
</taskWorkItemTaskEventLookupTableModal>
<taskWorkItemEmployeeLookupTableModal #taskWorkItemEmployeeLookupTableModal (modalSave)="getNewEmployeeId()">
</taskWorkItemEmployeeLookupTableModal>
</div>