<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
    <div class="d-flex flex-column flex-column-fluid">
        <!-- topbar -->
        <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
            <div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
                <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
                    <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">
                        Product Category Dashboard
                    </h1>
                    <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                        <li class="breadcrumb-item text-muted">
                            <a href="javascript:;" [routerLink]="['/app/admin/hostDashboard']"
                                class="text-muted text-hover-primary">Dashboard</a>
                        </li>
                        <li class="breadcrumb-item">
                            <span class="bullet bg-gray-400 w-5px h-2px"></span>
                        </li>
                        <li [routerLink]="['/app/main/shop/productCategories']"
                            class="breadcrumb-item cursor-pointer text-muted">Product Category List</li>
                    </ul>
                </div>
                <div class="d-flex align-items-center gap-2 gap-lg-3">
                    <a [routerLink]="['/app/main/shop/productCategories']" href="javascript:;"
                        class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal"
                        data-bs-target="#kt_modal_create_app"><i class="fas fa-arrow-alt-circle-left fa-2xl"></i></a>
                </div>
            </div>
        </div>
        <div id="kt_app_content" class="app-content flex-column-fluid">
            <div id="kt_app_content_container" class="app-container container-xxl">
                <div class="card mb-6 mb-xl-9">
                    <div class="card-body pt-9 pb-0">
                        <div class="d-flex flex-wrap flex-sm-nowrap mb-6">
                            <div
                                class="d-flex flex-center flex-shrink-0 bg-light rounded w-100px h-100px w-lg-150px h-lg-150px me-7 mb-4">
                                <img class="dashboard_header_image" *ngIf="imageSrc" src="{{imageSrc}}" alt="image">
                                <img class="dashboard_header_image" src="/assets/common/images/p1.png" *ngIf="!imageSrc"
                                    alt="image">
                            </div>

                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
                                    <div class="d-flex flex-column">
                                        <div class="d-flex align-items-center mb-1">
                                            <a href="javascript:;"
                                                class="text-gray-800 text-hover-primary fs-2 fw-bold me-3">
                                                {{productCategory.name}}
                                            </a>
                                            <span class="badge-circle badge badge-success text-white"
                                                *ngIf="productCategory.published">
                                                <i class="fas fa-check-circle text-white"></i>
                                            </span>
                                            <!-- <span *ngIf="productCategory.isPackageProduct"
                                                class="badge badge-primary text-center ms-2" title="Primary Category">
                                                Package
                                            </span> -->
                                        </div>
                                        <div *ngIf="productCategory.metaTitle"
                                            class="d-flex flex-wrap fw-semibold mb-1 align-items-center fs-6 text-gray-500">
                                            <i class="fas fa-tag me-2"></i>
                                            <span>Meta Title : </span>
                                            <span class="fw-bold">{{productCategory.metaTitle}}</span>
                                            <!-- <span
                                                *ngIf="allProductAdditionalCategory!=null && allProductAdditionalCategory.length>0">
                                                , <span
                                                    *ngFor="let item of allProductAdditionalCategory;last as isLast">
                                                    {{item.name}}
                                                    <span *ngIf="!isLast">, </span>
                                                </span>
                                            </span> -->
                                        </div>
                                        <!-- <div *ngIf="storeName"
                                            class="d-flex flex-wrap fw-bold mb-1 align-items-center fs-6 text-gray-500">
                                            <i class="fas fa-store-alt me-2"></i>
                                            {{storeName}}
                                        </div> -->
                                        <!-- <div *ngIf="membershipName"
                                            class="d-flex flex-wrap fw-semibold mb-1 align-items-center fs-6 text-gray-500">
                                            <i class="fas fa-medal me-2"></i>
                                            <span>{{membershipName}}: </span> <span class="fw-bold">$${{membershipPrice
                                                | number :
                                                '1.2-2'}}</span>
                                        </div> -->
                                        <!-- <div
                                            class="d-flex flex-wrap fw-semibold mb-1 align-items-center text-gray-500 fs-6">
                                            <i class="flaticon-price-tag me-2"></i>
                                            <span>Regular Price: </span> <span class="fw-bold"> ${{productCategory.regularPrice
                                                | number : '1.2-2'}}</span>
                                            <span *ngIf="productCategory.salePrice" class="ms-3">Sale Price: </span> <span
                                                class="fw-bold"> ${{productCategory.salePrice | number : '1.2-2'}}</span>
                                        </div>
                                        <div *ngIf="ratingScore"
                                            class="d-flex flex-wrap fw-semibold mb-1 align-items-center text-gray-500 fs-6">
                                            <i class="flaticon-star me-2"></i>
                                            <span>{{ratingScore}} out of 5,</span>
                                            <span class="ms-3">{{numberOfRatings}} Ratings</span>
                                        </div> -->
                                        <!-- <div *ngIf="pickupOrDeliveryTags.length>0"
                                            class="d-flex flex-wrap fw-semibold mb-1 align-items-center text-gray-500 fs-6">
                                            <i class="fas fa-shipping-fast me-2"></i>
                                            <span *ngFor="let item of pickupOrDeliveryTags;last as isLast">
                                                {{item}}
                                                <span *ngIf="!isLast" class="st_name">
                                                    |
                                                </span>
                                            </span>
                                        </div> -->
                                    </div>

                                    <!-- <div class="d-flex mb-4 select_button_custom">
                                        <a href="{{publicViewUrl}}" target="_blank"
                                            class="btn btn-sm btn-success me-4 pt-3"><i class="fas fa-eye fs-6 "></i>
                                            Public View</a>
                                        <p-selectButton [options]="productPublishedOptions"
                                            name="productPublishedOptions" id="productPublishedOptions"
                                            [(ngModel)]="productCategory.isPublished" optionLabel="label"
                                            optionValue="value"></p-selectButton>

                                    </div> -->
                                </div>

                                <!--begin::Info-->
                                <div class="d-flex flex-wrap justify-content-start">


                                    <div class="symbol-group symbol-hover mb-3">
                                        <!-- <div class="symbol symbol-35px symbol-circle" data-bs-toggle="tooltip"
                                            data-bs-original-title="Alan Warden" data-kt-initialized="1"
                                            *ngFor="let item of teams">
                                            <span *ngIf="item.picture==null"
                                                class="symbol-label bg-warning text-inverse-warning fw-bold">{{item.employeeName
                                                | nameSplit}}</span>
                                            <img *ngIf="item.picture!=null" alt="Pic" src="{{item.picture}}">
                                        </div> -->
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="separator"></div>

                        <div class="db_tabs_aligned_top">
                            <ul class="nav mt-5 nav-tabs nav-line-tabs nav-line-tabs-2x mb-0 fs-5">
                                <li class="nav-item">
                                    <a class="nav-link active" data-bs-toggle="tab" href="#product_editor">
                                        <i class="fas fa-edit"></i> Basic Info
                                    </a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#pc_product">
                                        <i class="fas fa-cart-arrow-down"></i> Product
                                    </a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#pc_variants">
                                        <i class="fas fa-sitemap"></i> Variants
                                    </a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#pc_team">
                                        <i class="fas fa-users"></i> Teams
                                    </a>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="product_editor" role="tabpanel">
                        <!--begin::Accordion-->
                        <div class="accordion card_accordion" id="kt_accordion_1">
                            <div class="card mb-6">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="kt_accordion_1_header_1">
                                        <button class="accordion-button fs-4 fw-bold" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#kt_accordion_1_body_1"
                                            aria-expanded="true" aria-controls="kt_accordion_1_body_1">
                                            <i class="fas fa-info-circle fa-1x me-2"></i>
                                            Basic Info
                                        </button>
                                    </h2>
                                    <div id="kt_accordion_1_body_1" class="accordion-collapse collapse show"
                                        aria-labelledby="kt_accordion_1_header_1" data-bs-parent="#kt_accordion_1">
                                        <div class="card-body pt-10">
                                            <!--begin::Form-->
                                            <form #productCategoryForm="ngForm" novalidate (ngSubmit)="save()"
                                                autocomplete="off">

                                                <div class="modal-body">
                                                    <!-- <div class="my-5">
                                                        <label class="form-label" for="MediaLibraryName">{{ l('MediaLibrary') }}</label>
                                                        <div class="input-group">
                                                            <input class="form-control" id="MediaLibraryName" name="mediaLibraryName"
                                                                [(ngModel)]="mediaLibraryName" type="text" disabled />
                                                            <button class="btn btn-primary blue" (click)="openSelectMediaLibraryModal()" type="button">
                                                                <i class="fa fa-search"></i>
                                                                {{ l('Pick') }}
                                                            </button>
                                                            <button class="btn btn-danger btn-icon" type="button" (click)="setMediaLibraryIdNull()">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <input class="form-control" name="productCategory.mediaLibraryId"
                                                        [(ngModel)]="productCategory.mediaLibraryId" type="text" hidden /> -->
                                                    <div class="row">
                                                        <div class="col-xl-12">
                                                            <!--begin::Input group-->
                                                            <div class="mb-7">
                                                                <div class="image-input image-input-outline"
                                                                    style="background-image: url(assets/common/images/location.png)">
                                                                    <div *ngIf="imageSrc"
                                                                        class="image-input-wrapper w-125px h-125px"
                                                                        [style.background-image]="'url(' + imageSrc + ')'">
                                                                    </div>
                                                                    <div *ngIf="!imageSrc"
                                                                        class="image-input-wrapper w-125px h-125px"
                                                                        style="background-image: url(assets/common/images/location.png)">
                                                                    </div>
                                                                    <label
                                                                        class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                                                                        data-kt-image-input-action="change"
                                                                        data-bs-toggle="tooltip"
                                                                        aria-label="Change avatar"
                                                                        data-bs-original-title="Change avatar"
                                                                        data-kt-initialized="1">
                                                                        <i class="bi bi-pencil-fill fs-7"></i>
                                                                        <input type="file" name="profile_avatar"
                                                                            id="customFile" ng2FileSelect
                                                                            [uploader]="uploader"
                                                                            (change)="fileChangeEvent($event)"
                                                                            accept=".png, .jpg, .jpeg">
                                                                        <input type="hidden" name="avatar_remove">
                                                                    </label>
                                                                </div>
                                                                <div class="form-text">Allowed file types: png, jpg,
                                                                    jpeg.
                                                                </div>
                                                            </div>
                                                            <!--end::Input group-->
                                                        </div>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_Name">{{
                                                            l('Name') }} *</label>
                                                        <input type="text" #ProductCategory_Name="ngModel"
                                                            id="ProductCategory_Name" class="form-control"
                                                            [(ngModel)]="productCategory.name" name="Name" minlength="1"
                                                            maxlength="128" required />
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_Name"></validation-messages>
                                                    </div>

                                                    <!-- <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_Description">{{ l('Description') }}</label>
                                                        <input type="text" #ProductCategory_Description="ngModel" id="ProductCategory_Description"
                                                            class="form-control" [(ngModel)]="productCategory.description" name="Description" />
                                                        <validation-messages [formCtrl]="ProductCategory_Description"></validation-messages>
                                                    </div>  -->
                                                    <div class="my-5">
                                                        <label class="form-label mt-3 w-100 mb-5">
                                                            <div class="d-flex align-items-end justify-content-between">
                                                                <span class="required">Description</span>
                                                                <button class="btn btn-sm btn-light-primary"
                                                                    (click)="openAiModal('Category Description')">
                                                                    <i class="fa-file-signature fas me-2"></i>
                                                                    Generate Description
                                                                </button>
                                                            </div>
                                                        </label>
                                                        <p-editor id="ProductCategory_Description" name="description"
                                                            [(ngModel)]="productCategory.description" ngDefaultControl
                                                            [style]="{ height: '300px' }"
                                                            placeholder="'Type here...'"></p-editor>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-check form-check-custom form-check-solid">
                                                            <input id="ProductCategory_HasParentCategory"
                                                                #ProductCategory_HasParentCategory="ngModel"
                                                                name="HasParentCategory"
                                                                [(ngModel)]="productCategory.hasParentCategory"
                                                                type="checkbox" class="form-check-input" />
                                                            <span class="form-check-label">
                                                                {{ l('HasParentCategory') }}
                                                            </span>
                                                        </label>
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_HasParentCategory"></validation-messages>
                                                    </div>

                                                    <div class="my-5" *ngIf="productCategory.hasParentCategory">
                                                        <label class="form-label"
                                                            for="ProductCategory_ParentCategoryId">
                                                            {{ l('Parent Category') }}
                                                        </label>
                                                        <select name="parentCategoryId"
                                                            [(ngModel)]="productCategory.parentCategoryId"
                                                            class="form-select " required>
                                                            <option value="">{{ l('Select Parent Category') }}</option>
                                                            <option *ngFor="let item of allParentCategories"
                                                                value="{{ item.id }}">
                                                                {{ item.displayName }}
                                                            </option>
                                                        </select>
                                                        <!-- <input type="number" #ProductCategory_ParentCategoryId="ngModel"
                                                            id="ProductCategory_ParentCategoryId" class="form-control"
                                                            [(ngModel)]="productCategory.parentCategoryId" name="ParentCategoryId" />
                                                        <validation-messages [formCtrl]="ProductCategory_ParentCategoryId"></validation-messages> -->
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_Url">{{ l('Url')
                                                            }}</label>
                                                        <input type="text" #ProductCategory_Url="ngModel"
                                                            id="ProductCategory_Url" class="form-control"
                                                            [(ngModel)]="productCategory.url" name="Url" minlength="1"
                                                            maxlength="512" />
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_Url"></validation-messages>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_MetaTitle">{{
                                                            l('MetaTitle') }}</label>
                                                        <input type="text" #ProductCategory_MetaTitle="ngModel"
                                                            id="ProductCategory_MetaTitle" class="form-control"
                                                            [(ngModel)]="productCategory.metaTitle" name="MetaTitle"
                                                            minlength="1" maxlength="128" />
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_MetaTitle"></validation-messages>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_MetaKeywords">{{
                                                            l('MetaKeywords') }}</label>
                                                        <input type="text" #ProductCategory_MetaKeywords="ngModel"
                                                            id="ProductCategory_MetaKeywords" class="form-control"
                                                            [(ngModel)]="productCategory.metaKeywords"
                                                            name="MetaKeywords" minlength="1" maxlength="512" />
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_MetaKeywords"></validation-messages>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-label" for="ProductCategory_DisplaySequence">
                                                            {{ l('DisplaySequence') }}
                                                        </label>
                                                        <input type="number" #ProductCategory_DisplaySequence="ngModel"
                                                            id="ProductCategory_DisplaySequence" class="form-control"
                                                            [(ngModel)]="productCategory.displaySequence"
                                                            name="DisplaySequence" />
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_DisplaySequence"></validation-messages>
                                                    </div>
                                                    <div class="my-5">
                                                        <label class="mb-2" for="employee">{{l("Teams")}}</label>
                                                        <p-multiSelect name="employee" id="employee"
                                                            [options]="employeeList" [(ngModel)]="selectedEmployees"
                                                            optionLabel="displayName" [virtualScroll]="true"
                                                            [filter]="true" [itemSize]="34" [maxSelectedLabels]="2"
                                                            class="multiselect-custom-virtual-scroll"
                                                            (onChange)="onEmployeeSelect($event)">
                                                        </p-multiSelect>
                                                    </div>
                                                    <div class="my-5">
                                                        <label class="form-check form-check-custom form-check-solid">
                                                            <input id="ProductCategory_ProductOrService"
                                                                #ProductCategory_ProductOrService="ngModel"
                                                                name="ProductOrService"
                                                                [(ngModel)]="productCategory.productOrService"
                                                                type="checkbox" class="form-check-input" />
                                                            <span class="form-check-label">
                                                                {{ l('ProductOrService') }}
                                                            </span>
                                                        </label>
                                                        <validation-messages
                                                            [formCtrl]="ProductCategory_ProductOrService"></validation-messages>
                                                    </div>

                                                    <div class="my-5">
                                                        <label class="form-check form-check-custom form-check-solid">
                                                            <input id="published" name="published"
                                                                [(ngModel)]="productCategory.published" type="checkbox"
                                                                class="form-check-input" />
                                                            <span class="form-check-label">
                                                                {{ l('Published') }}
                                                            </span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">

                                                    <button type="submit" class="btn btn-primary blue"
                                                        [disabled]="!productCategoryForm.form.valid"
                                                        [buttonBusy]="saving" [busyText]="l('SavingWithThreeDot')">
                                                        <i class="fa fa-save"></i>
                                                        <span>{{ l('Save') }}</span>
                                                    </button>
                                                </div>
                                            </form>
                                            <!--end::Form-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pc_product" role="tabpanel">
                        <div class="card mb-6">
                            <div class="card-body">
                                <div class="row">
                                    <appMasterProduct *ngIf="productCategoryId" [productCategoryId]="productCategoryId">
                                    </appMasterProduct>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pc_variants" role="tabpanel">
                        <div class="card mb-6">
                            <div class="card-body">
                                <div class="row">
                                    <appProductCategoryAndVariantCategoryMap *ngIf="productCategoryId"
                                        [productCategoryIdFilter]="productCategoryId">
                                    </appProductCategoryAndVariantCategoryMap>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pc_team" role="tabpanel">
                        <div class="card mb-6">
                            <div class="card-body">
                                <div class="row">
                                    <appProductCategoryTeams *ngIf="productCategoryId"
                                        [productCategoryId]="productCategoryId"></appProductCategoryTeams>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>